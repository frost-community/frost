# 技術ドキュメント

## 全般
### 基本的な開発の方法
基本的には以下の流れで作業を進める。
1. 作業ブランチで作業する
2. 自分でdevelopにマージする

マージしてもよいか分からない場合は以下のようなフローで作業を進める。
1. 作業ブランチで作業を行う
2. PullRequestを立てる
3. 誰かにdevelopにマージしてもらう

変更の方向性の議論が必要な場合は、issueを立ててから作業する。

たとえば大規模の変更を行うなどの例外があれば、この方法に従う必要はない。

### 開発環境構築手順
VS Code (on Linux or WSL)を想定。

1. **リポジトリのクローン**\
   本プロジェクトのリポジトリをLinuxもしくはWSL内の任意のディレクトリにcloneする。
1. ***Docker Engine*のインストール**\
   [Docker公式ドキュメントのインストール手順](https://docs.docker.com/engine/install/)を参考にDocker Engineをインストールする。

   ℹ️WSLの環境ではWindowsホストではなくLinuxへのDocker Engineインストールで動作を確認済みです。
1. **リポジトリを開く**\
   VS Codeでリポジトリのディレクトリを開く。
1. **拡張機能のインストール**\
   拡張機能を開き、検索窓に`@recommended`を入力。 (<kbd>Ctrl</kbd> + <kbd>Shift</kbd> + <kbd>P</kbd> → `Extensions: Show Recommended Extensions`)\
   「ワークスペースの推奨事項」アコーディオン内に表示された拡張機能を全てインストールする。
1. **Dev Containerを開く**\
   左下の `><` をクリックし、「コンテナーで再度開く」を選択する。 (<kbd>Ctrl</kbd> + <kbd>Shift</kbd> + <kbd>P</kbd> → `Dev Containers: Reopen in Container`)\
   上部中央に開いたモーダルから目的のリポジトリを選択する。

## バックエンド
### 技術選定
- 言語: TypeScript(Node.js)
- フレームワーク: Nest.js
- データベース: PostgreSQL

### WebSocket使用禁止
ソケットの同時接続数が増加するため。スケーラビリティに影響を与える。  
代わりにポーリングする。  

### フレームワークの使う機能を絞る
いろいろ入っているので使う機能以外は使用禁止にする。

### ORMライブラリの使用は控える
ORMライブラリだと複雑な問い合わせを書こうとすると、ライブラリ固有の書き方に依存するため余計に複雑になったりする。  
ただでさえSQLクエリは複雑になりがちなので、そのままSQLを書くべきという考え方。

基本的には薄いDBドライバを使う。  
DBテーブルの構築・マイグレーションはライブラリに頼っても良さそう。

## フロントエンド
### 技術選定
- 言語: TypeScript
- モジュールバンドラ: Vite
- フレームワーク: React
- UIフレームワーク: 未定
